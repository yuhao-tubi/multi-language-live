# ============================================
# Live Media Service - Environment Variables
# ============================================

# --------------------------------------------
# Server Configuration
# --------------------------------------------
# Port number for the Express server
PORT=3000

# Node environment (development, production, test)
NODE_ENV=development

# --------------------------------------------
# HLS Source Configuration
# --------------------------------------------
# URL of the HLS stream to process (M3U8 manifest)
# Example: https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8
SOURCE_URL=https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8

# Unique identifier for this stream
STREAM_ID=test-stream

# --------------------------------------------
# Buffer Configuration
# --------------------------------------------
# Duration in seconds to buffer segments before processing
# Default: 30 seconds
BUFFER_DURATION_SECONDS=30

# Maximum buffer size in megabytes
# Default: 500 MB
MAX_BUFFER_SIZE_MB=500

# --------------------------------------------
# Audio Processor WebSocket Configuration
# --------------------------------------------
# URL of the external audio processor service (Socket.IO)
AUDIO_PROCESSOR_URL=http://localhost:5000

# Number of reconnection attempts if connection fails
SOCKET_RECONNECT_ATTEMPTS=5

# Delay between reconnection attempts (milliseconds)
SOCKET_RECONNECT_DELAY_MS=2000

# --------------------------------------------
# SRS (Simple Realtime Server) Configuration
# --------------------------------------------
# RTMP URL for publishing to SRS
SRS_RTMP_URL=rtmp://localhost/live

# SRS HTTP API endpoint
SRS_HTTP_API=http://localhost:1985/api/v1

# SRS HLS output URL for playback
SRS_HLS_OUTPUT=http://localhost:8080

# --------------------------------------------
# Storage Configuration
# --------------------------------------------
# Base path for all storage
STORAGE_BASE_PATH=./storage

# Path for original stream segments
ORIGINAL_STREAM_PATH=./storage/original_stream

# Path for processed audio/video fragments
PROCESSED_FRAGMENTS_PATH=./storage/processed_fragments

# Path for application logs
LOGS_PATH=./storage/logs

# --------------------------------------------
# Automatic Cleanup Configuration
# --------------------------------------------
# Enable automatic cleanup of old files (true/false)
AUTO_CLEANUP_ENABLED=false

# Interval between cleanup runs (hours)
CLEANUP_INTERVAL_HOURS=24

# Maximum age of files before deletion (hours)
MAX_STORAGE_AGE_HOURS=48

# --------------------------------------------
# FFmpeg Configuration
# --------------------------------------------
# Path to FFmpeg binary
# macOS (Homebrew): /opt/homebrew/bin/ffmpeg or /usr/local/bin/ffmpeg
# Linux: /usr/bin/ffmpeg
FFMPEG_PATH=/usr/local/bin/ffmpeg

# FFmpeg log level (quiet, panic, fatal, error, warning, info, verbose, debug)
FFMPEG_LOG_LEVEL=error

# --------------------------------------------
# Logging Configuration
# --------------------------------------------
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log format (json, simple)
LOG_FORMAT=simple

# Write logs to file (true/false)
LOG_TO_FILE=true

# Write logs to console (true/false)
LOG_TO_CONSOLE=true


# ============================================
# Module-based Log Filtering
# ============================================
# Comma-separated list of module names to show logs for
# Leave empty or comment out to show all modules
# 
# Available modules:
#   - StreamFetcher
#   - Remuxer
#   - FragmentChunker
#   - StreamPublisher
#   - AudioProcessor
#   - PipelineOrchestrator
#
# Examples:
#
# Show only StreamPublisher and FragmentChunker logs:
#   LOG_MODULE_FILTER=StreamPublisher,FragmentChunker
#
# Show only StreamPublisher logs:
#   LOG_MODULE_FILTER=StreamPublisher
#
# Show multiple modules:
#   LOG_MODULE_FILTER=StreamFetcher,Remuxer,StreamPublisher
#
# Show all modules (default - leave empty or comment out):
LOG_MODULE_FILTER=